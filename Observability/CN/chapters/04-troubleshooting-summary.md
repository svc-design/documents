# 概述

结合原有的故障排查章节，本节总结了从客户端请求到服务端响应的完整排查思路，并梳理了应用指标、网络指标和日志分析的要点：

- **排查流程**：按照请求路径自上而下，从 DNS、TCP/TLS 到应用处理逐层分析，先确认故障范围，再定位应用层、服务层和网络层的异常。
- **应用指标**：关注响应时间、错误率、系统资源、用户留存和吞吐量，通过 APM、监控面板等工具定位慢请求和依赖服务瓶颈。
- **网络指标**：优先监控延迟、丢包率、带宽利用率和 TCP 连接时间，结合流量趋势和路径分析优化网络质量。
- **日志分析**：从应用日志、接口调用日志到网络流日志逐级深入，利用调用链追踪和抓包等方式快速定位问题根因。

# 对比

| 维度     | 关注重点                                 | 常用工具                     | 典型问题示例               |
|----------|------------------------------------------|------------------------------|----------------------------|
| 应用指标 | 响应时间、错误率、资源使用、吞吐量       | APM、监控面板、性能测试工具 | 慢查询、依赖服务超时       |
| 网络指标 | 延迟、丢包率、带宽利用率、重传率         | NetFlow、ping、traceroute   | 链路拥塞、跨区域访问延迟   |
| 日志分析 | 应用日志、调用日志、网络流/数据包日志    | ELK、Jaeger、Tcpdump        | 错误堆栈、HTTP 4xx/5xx 等 |

# 场景

- **服务端资源耗尽**：CPU/内存达到上限导致 5xx 错误；通过扩容、优化代码或限流解决。
- **依赖服务故障**：认证或存储服务超时；配置重试与降级并与提供方协作修复。
- **请求格式错误**：客户端参数不合法返回 4xx；检查日志与 API 文档并增加校验。
- **网络连接失败**：DNS 配置错误或链路中断；使用 ping、traceroute 等定位并修复。
- **典型案例**：如 DNS 故障、IO 瓶颈、数据库慢查询或网络时延异常，均需结合上述指标和日志逐步排查。
